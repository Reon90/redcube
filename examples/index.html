<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style type="text/css">
        body {
            margin: 0;
        }
        canvas {
            width: 100%;
            height: 100vh;
            vertical-align: top;
        }
        #selector {
            position: absolute;
            top: 0;
            left: 0;
        }
    </style>
</head>

<body>
    <div>
        <canvas id="canvas"></canvas>
        <div id="selector"></div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es6-promise/4.1.0/es6-promise.auto.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fetch/2.0.3/fetch.js"></script>
    <script src="../dist/redcube.js"></script>
    <script>
        const name = localStorage.getItem('sample') || 'BrainStem';
        const canvas = document.getElementById('canvas');
        const samples = ['2CylinderEngine', 'Avocado', 'BarramundiFish', 'Box', 'BoxAnimated', 'BoxSemantics', 'BoxTextured', 'BoxWithoutIndices', 'BrainStem', 'Buggy', 'CesiumMan', 'CesiumMilkTruck', 'Duck', 'GearboxAssy', 'Monster', 'ReciprocatingSaw', 'RiggedFigure', 'RiggedSimple', 'SmilingFace', 'VC', 'WalkingLady'];
        const select = document.createElement('select');
        select.onchange = function() {
            localStorage.setItem('sample', select.value);
            window.location.reload();
        }
        samples.forEach(function(it) {
            const option = document.createElement('option');
            option.innerHTML = it;
            option.value = it;
            select.appendChild(option);
        });
        select.value = name;
        selector.appendChild(select);

        const renderer = new redcube.RedCube('https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/1.0/' + name + '/glTF/' + name + '.gltf', canvas);
        renderer.init().then(function() {
            if (renderer.parse.cameras.length) {
                const select = document.createElement('select');
                select.onchange = function() {
                    renderer._camera = renderer.parse.cameras.find(function(it) { 
                        return select.value === it.name; 
                    });
                }
                renderer.parse.cameras.forEach(function(it) {
                    const option = document.createElement('option');
                    option.innerHTML = it.name;
                    option.value = it.name;
                    select.appendChild(option);
                });
                selector.appendChild(select);
            }
        });
    </script>
</body>

</html>
